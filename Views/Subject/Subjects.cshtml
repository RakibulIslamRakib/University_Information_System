@model PaginatedList<University_Information_System.Models.Subject>

<link rel="stylesheet" href="~/css/projects.css" />

@{
    if (TempData["success"] != null)
    {
    <h3 class="headline" 
            style="align-content:center;
            background-color: #04AA6D;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            text-align:center; height:30px;">
            Message :   @TempData["success"]
    </h3>
    }
}

<div class="mainDiv">


    <div class="grid-container">
  <form asp-action="Subjects" method="get" class="grid-container">
    <div class="form-actions no-color">
        <p>
                    <input type="text" name="SearchString" placeholder="search subject..."
                    class="searchBar" value="@ViewData["CurrentFilter"]" />
                    <input type="submit" value="Search" class="btn" />

                     @{
            if (ViewBag.isAdmin == true)
            {      
               
                            <input class="btn" type="button"
                                   value="Add New Subject"
                                   onclick="location.href='@Url.Action("AddSubject", "Subject")'" />
            }}
        </p>
    </div>
</form>
 

</div>
    <div class="gridRow">
        <h3 style="text-align:center; padding-top:10px;">Subject List: </h3>
        <form asp-action="Subjects" method="get">
            <div class="form-actions no-color">

                <label for="PageNumber"> Item per Page: </label>
                <input name="itemsPerPage" class="searchBar" style="width:40px" type"number" value="@ViewData["ItemsPerPage"]" />
                <input type="submit" value="Show" class="btn" />
            </div>
        </form>

    </div>

<div class="cards">
    @{


        foreach (var subject in Model)
        {

                    <div class="card">
                        <div class="card__header">
                            <h4>@(subject.SubjectName) </h4>
                        </div>
                             
                        <div class="card__body" >
                            <span class="tag style="font-size:12px">Created : @(subject.CreatedDate)</span>
                           

                                <p style="font-size:14px">
                                    Descryption : <br>
                                    @(subject.Descryption.Count() > 50 ? subject.Descryption.Substring(50) + "...." : subject.Descryption)
                        </div>

                        <div class="card__footer">
                            <div class="button-group">
                            @if (ViewBag.hasAuth)
                            {
                                    <a class="detailsBtn"
                    asp-conztroller="Subject" asp-action="DetailsSubject" asp-route-id="@subject.id"> See details..</a>
                            }

                                @if (ViewBag.isAdmin == true)
                                {

                                            <a class="updateBtn"
                            asp-conztroller="Subject" asp-action="UpdateSubject" asp-route-id="@subject.id"> Update</a>
                                        <a class="deleteBtn"
                    asp-conztroller="Subject" asp-action="DeleteSubject" asp-route-id="@subject.id"> Delete</a>
                                }
                            </div>
                        </div>
                    </div>

        }

    }
</div>

@{
    var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
    var nextDisabled = !Model.HasNextPage ? "disabled" : "";
}

    <div class="paginationDiv">
        <div class="gridRow">
            <h4>Page No @(Model.PageIndex) of @(Model.TotalPages)</h4>

            <form asp-action="Subjects" method="get" class="grid-container">
                <div class="form-actions no-color">
                    <input type="hidden" name="ItemsPerPage" value="@ViewData["ItemsPerPage"]" />
                    <label for="PageNumber"> Goto Page</label>
                    <select name="PageNumber" class="searchBar" style="width:100px">
                        <option class="selectItem" value=@(Model.PageIndex)>--select--</option>
                        @foreach (int index in Enumerable.Range(1, (Model.TotalPages)))
                        {
                            <option class="selectItem" value=@(index)>Page : @(index)</option>
                        }
                    </select>
                    <input type="submit" value="Go" class="btn" />
                </div>
            </form>
        </div>

        <a asp-action="Subjects" asp-route-itemsPerPage="@ViewData["ItemsPerPage"]"
           asp-route-pageNumber="@(Model.PageIndex - 1)"
           asp-route-currentFilter="@ViewData["CurrentFilter"]"
           class="btn @prevDisabled">
            Previous
        </a>


        @foreach (int page in Model.RangePageList)
        {
            if (page == Model.PageIndex)
            {
                <a asp-action="Subjects" class="selected"
           asp-route-pageNumber="@(page)" asp-route-itemsPerPage="@ViewData["ItemsPerPage"]"
           asp-route-currentFilter="@ViewData["CurrentFilter"]">
                    @(page)
                </a>
            }
            else
            {
                <a asp-action="Subjects" class="btn"
           asp-route-pageNumber="@(page)" asp-route-itemsPerPage="@ViewData["ItemsPerPage"]"
           asp-route-currentFilter="@ViewData["CurrentFilter"]"
           class="btn">
                    @(page)
                </a>
            }
        }

        <a asp-action="Subjects"
           asp-route-pageNumber="@(Model.PageIndex + 1)"
           asp-route-itemsPerPage="@ViewData["ItemsPerPage"]"
           asp-route-currentFilter="@ViewData["CurrentFilter"]"
           class="btn @nextDisabled">
            Next
        </a>

    </div>

 </div>